{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"input-field\"\n};\nconst _hoisted_2 = {\n  class: \"input-field\"\n};\nconst _hoisted_3 = {\n  class: \"input-field\"\n};\nconst _hoisted_4 = {\n  class: \"input-field\"\n};\nconst _hoisted_5 = {\n  class: \"input-field\"\n};\nconst _hoisted_6 = {\n  class: \"input-field\"\n};\nconst _hoisted_7 = {\n  key: 0\n};\nconst _hoisted_8 = [\"src\"];\nconst _hoisted_9 = {\n  key: 1\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_date_picker = _resolveComponent(\"el-date-picker\");\n  const _component_el_container = _resolveComponent(\"el-container\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", null, [_createVNode(_component_el_container, {\n    class: \"content-row\"\n  }, {\n    default: _withCtx(() => [_cache[6] || (_cache[6] = _createElementVNode(\"div\", {\n      class: \"input-tip\"\n    }, \" 商品名称: \", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_1, [_createVNode(_component_el_input, {\n      modelValue: _ctx.queryParam.good,\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => _ctx.queryParam.good = $event)\n    }, null, 8 /* PROPS */, [\"modelValue\"])]), _cache[7] || (_cache[7] = _createElementVNode(\"div\", {\n      class: \"input-tip\"\n    }, \" 收货人: \", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_el_input, {\n      modelValue: _ctx.queryParam.consignee,\n      \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => _ctx.queryParam.consignee = $event)\n    }, null, 8 /* PROPS */, [\"modelValue\"])]), _cache[8] || (_cache[8] = _createElementVNode(\"div\", {\n      class: \"input-tip\"\n    }, \" 支付时间: \", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_el_date_picker, {\n      type: \"daterange\",\n      \"range-separator\": \"至\",\n      \"start-placeholder\": \"开始日期\",\n      \"end-placeholder\": \"结束日期\",\n      modelValue: _ctx.queryParam.payTime,\n      \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => _ctx.queryParam.payTime = $event)\n    }, null, 8 /* PROPS */, [\"modelValue\"])])]),\n    _: 1 /* STABLE */,\n    __: [6, 7, 8]\n  }), _createVNode(_component_el_container, {\n    class: \"content-row\"\n  }, {\n    default: _withCtx(() => [_cache[9] || (_cache[9] = _createElementVNode(\"div\", {\n      class: \"input-tip\"\n    }, \" 用户名称: \", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_4, [_createVNode(_component_el_input, {\n      modelValue: _ctx.queryParam.name,\n      \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => _ctx.queryParam.name = $event)\n    }, null, 8 /* PROPS */, [\"modelValue\"])]), _cache[10] || (_cache[10] = _createElementVNode(\"div\", {\n      class: \"input-tip\"\n    }, \" 手机号: \", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_5, [_createVNode(_component_el_input, {\n      modelValue: _ctx.queryParam.phone,\n      \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => _ctx.queryParam.phone = $event)\n    }, null, 8 /* PROPS */, [\"modelValue\"])]), _cache[11] || (_cache[11] = _createElementVNode(\"div\", {\n      class: \"input-tip\"\n    }, \" 发货时间: \", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_6, [_createVNode(_component_el_date_picker, {\n      type: \"daterange\",\n      \"range-separator\": \"至\",\n      \"start-placeholder\": \"开始日期\",\n      \"end-placeholder\": \"结束日期\",\n      modelValue: _ctx.queryParam.sendTime,\n      \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => _ctx.queryParam.sendTime = $event)\n    }, null, 8 /* PROPS */, [\"modelValue\"])])]),\n    _: 1 /* STABLE */,\n    __: [9, 10, 11]\n  })]), _createElementVNode(\"div\", null, [$data.goodsData.length > 0 ? (_openBlock(), _createElementBlock(\"table\", _hoisted_7, [_cache[12] || (_cache[12] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", null, \"商品ID\"), _createElementVNode(\"th\", null, \"商品名称\"), _createElementVNode(\"th\", null, \"价格\"), _createElementVNode(\"th\", null, \"分类\"), _createElementVNode(\"th\", null, \"图片\")])], -1 /* HOISTED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.goodsData, (item, index) => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: index\n    }, [_createElementVNode(\"td\", null, _toDisplayString(item._id), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(item.name), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(item.price), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(item.category), 1 /* TEXT */), _createElementVNode(\"td\", null, [_createElementVNode(\"img\", {\n      src: item.image,\n      alt: \"商品图片\",\n      style: {\n        \"width\": \"100px\",\n        \"height\": \"100px\"\n      }\n    }, null, 8 /* PROPS */, _hoisted_8)])]);\n  }), 128 /* KEYED_FRAGMENT */))])])) : (_openBlock(), _createElementBlock(\"p\", _hoisted_9, \"正在加载数据...\"))])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","_createElementVNode","_createVNode","_component_el_container","_hoisted_1","_component_el_input","_ctx","queryParam","good","$event","_hoisted_2","consignee","_hoisted_3","_component_el_date_picker","type","payTime","_hoisted_4","name","_hoisted_5","phone","_hoisted_6","sendTime","$data","goodsData","length","_createElementBlock","_hoisted_7","_Fragment","_renderList","item","index","key","_toDisplayString","_id","price","category","src","image","alt","style","_hoisted_9"],"sources":["C:\\Users\\Administrator\\Desktop\\小程序后台\\coffeeshop\\src\\components\\order\\goods.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <el-container class=\"content-row\">\r\n            <div class=\"input-tip\">\r\n                商品名称:\r\n            </div>\r\n            <div class=\"input-field\">\r\n                <el-input v-model=\"queryParam.good\"></el-input>\r\n            </div>\r\n            <div class=\"input-tip\">\r\n                收货人:\r\n            </div>\r\n            <div class=\"input-field\">\r\n                <el-input v-model=\"queryParam.consignee\"></el-input>\r\n            </div>\r\n            <div class=\"input-tip\">\r\n                支付时间:\r\n            </div>\r\n            <div class=\"input-field\">\r\n                <el-date-picker type=\"daterange\" range-separator=\"至\" start-placeholder=\"开始日期\" end-placeholder=\"结束日期\"\r\n                    v-model=\"queryParam.payTime\">\r\n                </el-date-picker>\r\n            </div>\r\n        </el-container>\r\n        <el-container class=\"content-row\">\r\n            <div class=\"input-tip\">\r\n                用户名称:\r\n            </div>\r\n            <div class=\"input-field\">\r\n                <el-input v-model=\"queryParam.name\"></el-input>\r\n            </div>\r\n            <div class=\"input-tip\">\r\n                手机号:\r\n            </div>\r\n            <div class=\"input-field\">\r\n                <el-input v-model=\"queryParam.phone\"></el-input>\r\n            </div>\r\n            <div class=\"input-tip\">\r\n                发货时间:\r\n            </div>\r\n            <div class=\"input-field\">\r\n                <el-date-picker type=\"daterange\" range-separator=\"至\" start-placeholder=\"开始日期\" end-placeholder=\"结束日期\"\r\n                    v-model=\"queryParam.sendTime\">\r\n                </el-date-picker>\r\n            </div>\r\n        </el-container>\r\n    </div>\r\n\r\n\r\n\r\n\r\n    <div>\r\n        <table v-if=\"goodsData.length > 0\">\r\n            <thead>\r\n                <tr>\r\n                    <th>商品ID</th>\r\n                    <th>商品名称</th>\r\n                    <th>价格</th>\r\n                    <th>分类</th>\r\n                    <th>图片</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr v-for=\"(item, index) in goodsData\" :key=\"index\">\r\n                    <td>{{ item._id }}</td>\r\n                    <td>{{ item.name }}</td>\r\n                    <td>{{ item.price }}</td>\r\n                    <td>{{ item.category }}</td>\r\n                    <td>\r\n                        <img :src=\"item.image\" alt=\"商品图片\" style=\"width: 100px; height: 100px;\">\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n        <p v-else>正在加载数据...</p>\r\n    </div>\r\n</template>\r\n\r\n\r\n<script>\r\n\r\nconst axios = require('axios');\r\n// 配置常量\r\nconst CONFIG = {\r\n    appId: 'wx6872b1e938e23c07',\r\n    appSecret: 'bb0342f524bf2fe87416defe5797f40a',\r\n    env: 'cloud1-6gzxjy5k59c1f367'\r\n};\r\n\r\nexport default {\r\n    name: 'goodsList',\r\n    data() {\r\n        return {\r\n            goodsData: [],\r\n            timer: null ,\r\n\r\n\r\n        };\r\n    },\r\n    methods: {\r\n        // 获取微信访问令牌\r\n        async getAccessToken() {\r\n            try {\r\n                const response = await axios.get('/cgi-bin/token', {\r\n                    params: {\r\n                        grant_type: 'client_credential',\r\n                        appid: CONFIG.appId,\r\n                        secret: CONFIG.appSecret\r\n                    }\r\n                });\r\n                return response.data.access_token;\r\n            } catch (error) {\r\n                console.error('获取访问令牌失败:', error);\r\n                throw error;\r\n            }\r\n        },\r\n\r\n        // 查询云数据库\r\n        async queryCloudDatabase() {\r\n            try {\r\n                const accessToken = await this.getAccessToken();\r\n                const query = {\r\n                    env: CONFIG.env,\r\n                    query: \"db.collection('goods').get()\"\r\n                };\r\n                const response = await axios.post(\r\n                    `/wechat-api/tcb/databasequery?access_token=${accessToken}`,\r\n                    query\r\n                );\r\n                this.goodsData = response.data.data.map(item => JSON.parse(item));\r\n                return response.data;\r\n            } catch (error) {\r\n                console.error('查询云数据库失败:', error);\r\n                throw error;\r\n            }\r\n        }\r\n    },\r\n    mounted() {\r\n        // 首次加载数据\r\n        this.queryCloudDatabase();\r\n        // 启动定时器（每5秒请求一次）\r\n        this.timer = setInterval(() => {\r\n            this.queryCloudDatabase();\r\n        }, 5000);\r\n    },\r\n    beforeUnmount() {\r\n        // 组件卸载时清除定时器\r\n        if (this.timer) {\r\n            clearInterval(this.timer);\r\n            this.timer = null;\r\n        }\r\n    }\r\n\r\n}\r\n</script>\r\n<style scoped>\r\ntable {\r\n    width: 100%;\r\n    border-collapse: collapse;\r\n}\r\n\r\nth,\r\ntd {\r\n    border: 1px solid #ddd;\r\n    padding: 8px;\r\n    text-align: left;\r\n}\r\n\r\nth {\r\n    background-color: #f2f2f2;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}